import os
import base64
import random
import sqlite3
import datetime
from io import BytesIO
from dotenv import load_dotenv
from openai import OpenAI
from telegram import Update, ReplyKeyboardMarkup, KeyboardButton, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, CallbackQueryHandler, filters, ContextTypes, ConversationHandler

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ env
load_dotenv()
TELEGRAM_TOKEN = os.getenv("TELEGRAM_BOT_TOKEN")
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY")
ADMIN_ID = int(os.getenv("ADMIN_ID", "0"))  # Ø¢ÛŒØ¯ÛŒ Ø§Ø¯Ù…ÛŒÙ† Ø§ØµÙ„ÛŒ Ø±Ø¨Ø§Øª

# Ø®ÙˆØ§Ù†Ø¯Ù† Ø¢Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø§Ø² Ù…ØªØºÛŒØ± Ù…Ø­ÛŒØ·ÛŒ
solana_wallets_str = os.getenv("SOLANA_WALLETS", "")
SOLANA_WALLETS = [wallet.strip() for wallet in solana_wallets_str.split(",") if wallet.strip()]
if not SOLANA_WALLETS:
    print("Ù‡Ø´Ø¯Ø§Ø±: Ù‡ÛŒÚ† Ø¢Ø¯Ø±Ø³ Ú©ÛŒÙ Ù¾ÙˆÙ„ÛŒ Ø¯Ø± Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·ÛŒ ØªØ¹Ø±ÛŒÙ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.")
    # ÛŒÚ© Ø¢Ø¯Ø±Ø³ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø®Ø·Ø§
    SOLANA_WALLETS = ["WALLET_ADDRESS_NOT_CONFIGURED"]

client = OpenAI(api_key=OPENAI_API_KEY)

# Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ú¯Ù„ÙˆØ¨Ø§Ù„
TUTORIAL_VIDEO_LINK = "https://youtube.com/your_future_video_link"  # Ø¨Ø¹Ø¯Ø§ Ø§ØµÙ„Ø§Ø­ Ø´ÙˆØ¯

# Ù…ØªÙ† Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª - Ù…ØªÙ† Ú©Ø§Ù…Ù„
TERMS_AND_CONDITIONS = """
Ø§Ø² Ø´Ù…Ø§ Ú©Ø§Ø±Ø¨Ø± Ú¯Ø±Ø§Ù…ÛŒ Ø¯Ø¹ÙˆØª Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ù¾ÛŒØ´ Ø§Ø² Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù¾Ù„ØªÙØ±Ù… ØªØ­Ù„ÛŒÙ„â€ŒÚ¯Ø± Ùˆ Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒØ¯Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù†Ø§Ø±Ù…ÙˆÙˆÙ†ØŒ Ø§ÛŒÙ† Ø´Ø±Ø§ÛŒØ· Ø±Ø§ Ø¨Ø§ Ø¯Ù‚Øª Ù…Ø·Ø§Ù„Ø¹Ù‡ Ù†Ù…Ø§ÛŒÛŒØ¯. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø®Ø¯Ù…Ø§Øª Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø¨Ù‡ Ù…Ù†Ø²Ù„Ù‡â€ŒÛŒ Ù¾Ø°ÛŒØ±Ø´ Ú©Ø§Ù…Ù„ Ù…ÙˆØ§Ø±Ø¯ Ø²ÛŒØ± Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙˆØ¯. Ù‡Ø¯Ù Ù…Ø§ Ø­ÙØ¸ Ø§Ù…Ù†ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†ØŒ Ø´ÙØ§ÙÛŒØª Ø®Ø¯Ù…Ø§Øª Ùˆ Ø§Ø±Ø§Ø¦Ù‡ ØªØ¬Ø±Ø¨Ù‡â€ŒØ§ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ùˆ Ù‚Ø§Ø¨Ù„ Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¯Ø± ÙØ¶Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ Ø¨Ø§Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø±Ù…Ø²Ø§Ø±Ø²ÛŒ Ø§Ø³Øª.

Û±- Ø§Ù…Ù†ÛŒØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª:
Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø¨Ù‡ Ù‡ÛŒÚ†â€ŒÙˆØ¬Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø´Ù…Ø§ Ø¯Ø± ØµØ±Ø§ÙÛŒâ€ŒÙ‡Ø§ (Ø§Ø² Ø¬Ù…Ù„Ù‡ APIØŒ ÛŒÙˆØ²Ø±Ù†ÛŒÙ…ØŒ Ù¾Ø³ÙˆØ±Ø¯ØŒ Ú©Ù„ÛŒØ¯ Ø®ØµÙˆØµÛŒ Ùˆ...) Ø±Ø§ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ù„Ø·ÙØ§Ù‹ Ù‡ÛŒÚ†â€ŒÚ¯ÙˆÙ†Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­Ø³Ø§Ø³ÛŒ Ø±Ø§ Ø¯Ø± Ø§Ø®ØªÛŒØ§Ø± Ù‡ÛŒÚ† ÙØ±Ø¯ ÛŒØ§ Ù¾Ù„ØªÙØ±Ù…ÛŒ Ù‚Ø±Ø§Ø± Ù†Ø¯Ù‡ÛŒØ¯ØŒ Ø­ØªÛŒ Ø§Ú¯Ø± Ø®ÙˆØ¯ Ø±Ø§ Ù†Ù…Ø§ÛŒÙ†Ø¯Ù‡ Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ù…Ø¹Ø±ÙÛŒ Ú©Ù†Ø¯.

Û²- Ù…Ø§Ù‡ÛŒØª Ù¾Ù„ØªÙØ±Ù…:
Ù†Ø§Ø±Ù…ÙˆÙˆÙ† ÛŒÚ© Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ ØªØ­Ù„ÛŒÙ„â€ŒÚ¯Ø± Ø§Ø³ØªØŒ Ù†Ù‡ ØµØ±Ø§ÙÛŒ ÛŒØ§ Ø¨Ø³ØªØ± Ø§Ù†Ø¬Ø§Ù… Ù…Ø¹Ø§Ù…Ù„Ø§Øª. Ù‡ÛŒÚ† Ø®Ø±ÛŒØ¯ ÛŒØ§ ÙØ±ÙˆØ´ Ù…Ø³ØªÙ‚ÛŒÙ… Ø±Ù…Ø²Ø§Ø±Ø²ÛŒ Ø¯Ø± Ø§ÛŒÙ† Ù¾Ù„ØªÙØ±Ù… Ø§Ù†Ø¬Ø§Ù… Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.

Û³- Ø¹Ø¯Ù… Ø§Ø±Ø§Ø¦Ù‡ Ù…Ø´Ø§ÙˆØ±Ù‡ Ù…Ø§Ù„ÛŒ:
Ø§Ú¯Ø±Ú†Ù‡ Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù‚ÙˆÛŒØªØ±ÛŒÙ† Ù…Ø¯Ù„ Ù‡Ø§ÛŒ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒØŒ Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§ Ùˆ ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¯Ù‚ÛŒÙ‚ÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ØŒ Ø§Ù…Ø§ Ø§ÛŒÙ† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ù…Ø´Ø§ÙˆØ±Ù‡ Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø´Ø®ØµÛŒ ÛŒØ§ ØªØ¶Ù…ÛŒÙ† Ø³ÙˆØ¯ Ù†ÛŒØ³ØªÙ†Ø¯. Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± Ù¾ÛŒØ´ Ø§Ø² Ø§Ù‚Ø¯Ø§Ù… Ø¨Ù‡ Ø®Ø±ÛŒØ¯ ÛŒØ§ ÙØ±ÙˆØ´ØŒ Ù…ÙˆØ¸Ù Ø§Ø³Øª Ø¨Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ø´Ø®ØµÛŒ Ø®ÙˆØ¯ ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ Ú©Ù†Ø¯.

Û´- Ù…Ø³Ø¦ÙˆÙ„ÛŒØª Ø±ÛŒØ³Ú© Ù…Ø¹Ø§Ù…Ù„Ø§Øª:
Ú©Ù„ÛŒÙ‡ Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§ Ùˆ ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§ Ø¯Ø± Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ…Ø­ÙˆØ± Ùˆ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù‡Ø³ØªÙ†Ø¯ØŒ Ø§Ù…Ø§ Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø¨Ù‡ Ø¹Ù‡Ø¯Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø§Ø³Øª. Ù¾Ø°ÛŒØ±Ø´ Ø±ÛŒØ³Ú© Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒØŒ Ø¨Ø± Ø¹Ù‡Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ø§Ø² Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø§Ø³Øª.

Ûµ- Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ùˆ Ø¨Ù‡Ø¨ÙˆØ¯ Ø³Ø§Ù…Ø§Ù†Ù‡:
Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ ÛŒØ§ Ù†Ø§Ù…Ù†Ø¸Ù… Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´ÙˆØ¯. Ø¯Ø± ØµÙˆØ±Øª ØªØºÛŒÛŒØ±Ø§Øª Ù…Ù‡Ù… ÛŒØ§ Ù‚Ø·Ø¹ÛŒ Ù…ÙˆÙ‚ØªØŒ Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ú©Ø§Ù†Ø§Ù„ Ø±Ø³Ù…ÛŒ ÛŒØ§ Ø§ÛŒÙ…ÛŒÙ„ Ø§Ù†Ø¬Ø§Ù… Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯.

Û¶- ØªØºÛŒÛŒØ± Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ:
Ø¯Ø± ØµÙˆØ±Øª ØªØºÛŒÛŒØ± Ø¯Ø± Ø´Ø±Ø§ÛŒØ· Ùˆ Ø¶ÙˆØ§Ø¨Ø·ØŒ Ù†Ø³Ø®Ù‡ Ø¬Ø¯ÛŒØ¯ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ú©Ø§Ù†Ø§Ù„ Ø±Ø³Ù…ÛŒ Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯. Ù…Ø³Ø¦ÙˆÙ„ÛŒØª Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ø§ÛŒÙ† ØªØºÛŒÛŒØ±Ø§Øª Ø¨Ø§ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§Ø³Øª.

Û·- Ø§Ø±ØªÙ‚Ø§Ø¡ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§:
Ø§Ø´ØªØ±Ø§Ú© Ø´Ù…Ø§ Ø´Ø§Ù…Ù„ Ø§Ù…Ú©Ø§Ù†Ø§ØªÛŒ Ø§Ø³Øª Ú©Ù‡ Ø¯Ø± Ø¨Ø®Ø´ Ù…Ø¹Ø±ÙÛŒ Ù¾Ù„Ù†â€ŒÙ‡Ø§ Ø¯Ø±Ø¬ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯. Ø¯Ø± ØµÙˆØ±Øª Ø§ÙØ²ÙˆØ¯Ù† Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¯Ø± Ø¢ÛŒÙ†Ø¯Ù‡ØŒ ØªÛŒÙ… Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø­Ù‚ Ø¯Ø±ÛŒØ§ÙØª Ù‡Ø²ÛŒÙ†Ù‡ Ù…Ø¬Ø²Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ÛŒÙ† ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ Ø±Ø§ Ù…Ø­ÙÙˆØ¸ Ù…ÛŒâ€ŒØ¯Ø§Ù†Ø¯.

Û¸- Ø­Ù‚ÙˆÙ‚ Ù…Ø­ØªÙˆØ§ Ùˆ Ù…Ø§Ù„Ú©ÛŒØª Ù…Ø¹Ù†ÙˆÛŒ:
Ú©Ù¾ÛŒâ€ŒØ¨Ø±Ø¯Ø§Ø±ÛŒØŒ Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒØŒ Ø¨Ø§Ø²Ù†Ø´Ø± ÛŒØ§ ÙØ±ÙˆØ´ Ù…Ø­ØªÙˆØ§ØŒ Ø®Ø¯Ù…Ø§Øª ÛŒØ§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø±Ø§Ø¦Ù‡â€ŒØ´Ø¯Ù‡ ØªÙˆØ³Ø· Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø¨Ø¯ÙˆÙ† Ù…Ø¬ÙˆØ² Ú©ØªØ¨ÛŒ Ø±Ø³Ù…ÛŒ Ù…Ù…Ù†ÙˆØ¹ Ø§Ø³Øª. Ø¯Ø± ØµÙˆØ±Øª Ø³ÙˆØ¡Ø§Ø³ØªÙØ§Ø¯Ù‡ØŒ Ù¾ÛŒÚ¯Ø±Ø¯ Ù‚Ø§Ù†ÙˆÙ†ÛŒ Ùˆ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª Ú©ÛŒÙØ±ÛŒ Ùˆ Ù…Ø¯Ù†ÛŒ Ù…ØªÙˆØ¬Ù‡ Ù…ØªØ®Ù„Ù Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙˆØ¯.

âš ï¸ Ø¨Ø§ Ø§Ø¯Ø§Ù…Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø±Ø¨Ø§Øª Ùˆ Ø®Ø±ÛŒØ¯ Ø§Ø´ØªØ±Ø§Ú©ØŒ Ø´Ù…Ø§ ØªØ£ÛŒÛŒØ¯ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ Ú©Ù‡ ØªÙ…Ø§Ù…ÛŒ Ù…ÙˆØ§Ø±Ø¯ ÙÙˆÙ‚ Ø±Ø§ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ú©Ø±Ø¯Ù‡ Ùˆ Ø¨Ø§ Ø¢Ù† Ù…ÙˆØ§ÙÙ‚ Ù‡Ø³ØªÛŒØ¯. âœ…
"""

# Ù…Ø­ØªÙˆØ§ÛŒ Ø¨Ø®Ø´ Ù…Ø­ØµÙˆÙ„Ø§Øª Ù†Ø§Ø±Ù…ÙˆÙˆÙ†
NARMOON_PRODUCTS = """
ğŸŒŸ **Ù…Ø­ØµÙˆÙ„Ø§Øª Ù†Ø§Ø±Ù…ÙˆÙˆÙ†** ğŸŒŸ

Û±. **Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø¯Ú©Ø³ (Ø±Ø§ÛŒÚ¯Ø§Ù†): **
Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ Ø¯Ø± ÙˆØ§Ù‚Ø¹ ÛŒÚ© Ø§ÙØ²Ø±Ù†Ù‡ Ø¯Ø± Ú†Øª Ø¬ÛŒ Ù¾ÛŒ ØªÛŒ Ù‡Ø³ØªØ´ Ù…Ø®ØµÙˆØµ ØªÙˆÚ©Ù† Ù‡Ø§ÛŒ Ø¯Ú©Ø³ Ú©Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ÛŒÙ† Ø§ÙØ²ÙˆÙ†Ù‡ Ø­ØªÙ…Ø§ Ø¨Ø§ÛŒØ¯ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ú†Øª Ø¬ÛŒ Ù¾ÛŒ ØªÛŒ Ø±Ùˆ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ùˆ Ù†ØµØ¨ Ú©Ù†Ù† Ùˆ Ø¨Ø±Ø§Ø­ØªÛŒ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø¨Ø± Ø±ÙˆÛŒ Ù„ÛŒÙ†Ú© Ø²ÛŒØ± Ø§Ø²Ø´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù†.

Û². **Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ú©ÙˆÛŒÙ† (Ø±Ø§ÛŒÚ¯Ø§Ù†): **
Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ Ø¯Ø± ÙˆØ§Ù‚Ø¹ ÛŒÚ© Ø§ÙØ²Ø±Ù†Ù‡ Ø¯Ø± Ú†Øª Ø¬ÛŒ Ù¾ÛŒ ØªÛŒ Ù‡Ø³ØªØ´ Ù…Ø®ØµÙˆØµ Ø¢Ù„ØªÚ©ÙˆÛŒÙ† Ù‡Ø§ Ùˆ ØªÙˆÚ©Ù† Ù‡Ø§ÛŒ Ø®Ø§Ø±Ø¬ Ø§Ø² ÙØ¶Ø§ÛŒ Ø¯Ú©Ø³ Ú©Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ÛŒÙ† Ø§ÙØ²ÙˆÙ†Ù‡ Ø­ØªÙ…Ø§ Ø¨Ø§ÛŒØ¯ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ú†Øª Ø¬ÛŒ Ù¾ÛŒ ØªÛŒ Ø±Ùˆ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ùˆ Ù†ØµØ¨ Ú©Ù†Ù† Ùˆ Ø¨Ø±Ø§Ø­ØªÛŒ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø¨Ø± Ø±ÙˆÛŒ Ù„ÛŒÙ†Ú© Ø²ÛŒØ± Ø§Ø²Ø´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù†.

Û³. **Ù†Ø§Ø±Ù…ÙˆÙˆÙ† TNT (ÙˆÛŒÚ˜Ù‡ Pro): **
Ù¾ÛŒØ´Ø±ÙØªÙ‡â€ŒØªØ±ÛŒÙ† Ø§Ø¨Ø²Ø§Ø± ØªØ­Ù„ÛŒÙ„ Ú†Ø§Ø±ØªØŒ Ù…Ø®ØµÙˆØµ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù¾Ø±Ùˆ Ø¨Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ AI Ø§Ø®ØªØµØ§ØµÛŒ Ùˆ Ø³ØªØ§Ù¾ Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ Ø¯Ù‚ÛŒÙ‚. Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒØŒ Ø§Ø´ØªØ±Ø§Ú© Ù¾Ø±Ùˆ Ø±Ùˆ ØªÙ‡ÛŒÙ‡ Ú©Ù†!

Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù‡Ø± Ù…Ø­ØµÙˆÙ„ØŒ Ú¯Ø²ÛŒÙ†Ù‡ Ù…Ø±Ø¨ÙˆØ·Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:
"""

# Ù…Ø­ØªÙˆØ§ÛŒ Ø¨Ø®Ø´ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ
AI_ASSISTANT_FEATURES = """
ğŸ§  **Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ù†Ø§Ø±Ù…ÙˆÙˆÙ†** ğŸ§ 

ğŸ”¹ **ØªØ­Ù„ÛŒÙ„ ØªÚ©Ù†ÛŒÚ©Ø§Ù„ Ù¾ÛŒØ´Ø±ÙØªÙ‡**
- Ø¢Ù†Ø§Ù„ÛŒØ² Ø³Ù‡â€ŒØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ…ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø±Ú© Ø¬Ø§Ù…Ø¹ Ø±ÙˆÙ†Ø¯
- Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø¯Ù‚ÛŒÙ‚ Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ù‚ÛŒÙ…ØªÛŒ (Ù…Ø«Ù„Ø«ØŒ Ø³Ø± Ùˆ Ø´Ø§Ù†Ù‡ØŒ Ú©Ù Ø¯ÙˆÙ‚Ù„Ùˆ Ùˆ...)
- ØªØ±Ø³ÛŒÙ… Ø®ÙˆØ¯Ú©Ø§Ø± Ø³Ø·ÙˆØ­ ÙÛŒØ¨ÙˆÙ†Ø§Ú†ÛŒ Ùˆ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù†Ù‚Ø§Ø· Ø¨Ø§Ø²Ú¯Ø´Øª Ø§Ø­ØªÙ…Ø§Ù„ÛŒ
- ØªØ´Ø®ÛŒØµ ÙˆØ§Ú¯Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§ Ùˆ Ù‡Ø´Ø¯Ø§Ø± Ø¨Ù‡ Ù…Ø¹Ø§Ù…Ù„Ù‡â€ŒÚ¯Ø±

ğŸ”¹ **Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒØ¯Ù‡ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯**
- Ø§Ø±Ø§Ø¦Ù‡ Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ Ø¨Ø§ R/R (Ø±ÛŒØ³Ú© Ø¨Ù‡ Ø±ÛŒÙˆØ§Ø±Ø¯) Ù…Ø´Ø®Øµ
- ØªØ¹ÛŒÛŒÙ† Ù†Ù‚Ø§Ø· Ø¯Ù‚ÛŒÙ‚ ÙˆØ±ÙˆØ¯ØŒ Ø­Ø¯ Ø¶Ø±Ø± Ùˆ Ø§Ù‡Ø¯Ø§Ù Ù‚ÛŒÙ…ØªÛŒ
- Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ù…â€ŒØ±ÛŒØ³Ú© Ùˆ Ù¾Ø±Ø±ÛŒØ³Ú© Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ø´Ø±Ø§ÛŒØ· Ø¨Ø§Ø²Ø§Ø±
- Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒâ€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¢Ø®Ø±ÛŒÙ† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²Ø§Ø±

ğŸ”¹ **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ø§Ù†ÙˆØ§Ø¹ Ø¨Ø§Ø²Ø§Ø±Ù‡Ø§**
- Ø§Ø±Ø²Ù‡Ø§ÛŒ Ø¯ÛŒØ¬ÛŒØªØ§Ù„ (Ø¨ÛŒØªâ€ŒÚ©ÙˆÛŒÙ†ØŒ Ø§ØªØ±ÛŒÙˆÙ… Ùˆ ØµØ¯Ù‡Ø§ Ø±Ù…Ø²Ø§Ø±Ø² Ø¯ÛŒÚ¯Ø±)
- ÙØ§Ø±Ú©Ø³ (Ø¬ÙØª Ø§Ø±Ø²Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ùˆ ÙØ±Ø¹ÛŒ)
- Ø·Ù„Ø§ØŒ Ù†Ù‚Ø±Ù‡ Ùˆ Ø³Ø§ÛŒØ± ÙÙ„Ø²Ø§Øª Ú¯Ø±Ø§Ù†Ø¨Ù‡Ø§
- Ø³Ù‡Ø§Ù… (Ø¨Ø§Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø§ÛŒØ±Ø§Ù†ØŒ Ø¢Ù…Ø±ÛŒÚ©Ø§ Ùˆ Ø³Ø§ÛŒØ± Ø¨ÙˆØ±Ø³â€ŒÙ‡Ø§ÛŒ Ø¬Ù‡Ø§Ù†ÛŒ)

ğŸ”¹ **Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡**
- Ù¾Ø±Ø¯Ø§Ø²Ø´ ØªØµÙˆÛŒØ± Ø¨Ø±Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ Ø¯Ø± Ù‡Ø± ÙØ±Ù…Øª
- ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ù…Ø¯Ø§ÙˆÙ… Ùˆ Ø¨Ù‡Ø¨ÙˆØ¯ Ø¯Ù‚Øª ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§
- Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ø­Ø±Ú©Ø§Øª Ù‚ÛŒÙ…Øª
- Ù‚Ø§Ø¨Ù„ÛŒØª ØªØ´Ø®ÛŒØµ Ø´Ø±Ø§ÛŒØ· Ø®Ø§Øµ Ø¨Ø§Ø²Ø§Ø± Ù…Ø§Ù†Ù†Ø¯ Ù†ÙˆØ³Ø§Ù†Ø§Øª Ø´Ø¯ÛŒØ¯ ÛŒØ§ Ø±ÙˆÙ†Ø¯Ù‡Ø§ÛŒ Ú©Ø§Ø°Ø¨

ğŸ”¹ **ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø±Ø§Ø­Øª**
- Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø³Ø§Ø¯Ù‡ Ùˆ Ø¨Ø¯ÙˆÙ† Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ
- Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ Ø³Ø±ÛŒØ¹ Ø¨Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ ØªØ­Ù„ÛŒÙ„
- Ø§Ù…Ú©Ø§Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Ù‡Ø± Ø²Ù…Ø§Ù† Ùˆ Ù…Ú©Ø§Ù†
- Ù‚Ø§Ø¨Ù„ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ù…Ø±ÙˆØ± ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ
"""

# Ù…Ø­ØªÙˆØ§ÛŒ Ø¨Ø®Ø´ Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„
FAQ_CONTENT = """
â“ **Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„** â“

Û±- Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ú†ÛŒÙ‡ Ùˆ Ú†Ù‡ Ú©Ø§Ø±ÛŒ Ø¨Ø±Ø§Ù… Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡ØŸ
Ù†Ø§Ø±Ù…ÙˆÙˆÙ† ÛŒÚ© Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ ØªØ­Ù„ÛŒÙ„â€ŒÚ¯Ø± Ø¨Ø± Ù¾Ø§ÛŒÙ‡ Ùˆ Grok3 GPT-4o Ù‡Ø³Øª Ú©Ù‡ Ø¨Ø§Ø²Ø§Ø± Ø±Ù…Ø²Ø§Ø±Ø²Ù‡Ø§ Ø±Ùˆ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø±ØµØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ù‡ØŒ ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ ØªØ±Ù†Ø¯ Ø±Ùˆ Ù¾ÛŒØ¯Ø§ Ù…ÛŒâ€ŒÚ©Ù†Ù‡ØŒ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø®Ø±ÛŒØ¯/ÙØ±ÙˆØ´ Ù…ÛŒâ€ŒØ¯Ù‡ Ùˆ Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø§Ø² ØªØ­Ù„ÛŒÙ„ ØªÚ©Ù†ÛŒÚ©Ø§Ù„ØŒ Ø¢Ù†Ú†ÛŒÙ† ØªØ§ Ø¨Ø±Ø±Ø³ÛŒ Ø§Ù…Ù†ÛŒØª Ùˆ Ø§Ø®Ø¨Ø§Ø± Ø±Ùˆ ØªÙˆÛŒ ÛŒÚ© Ø§Ø¨Ø²Ø§Ø± Ø¨Ø±Ø§Øª Ø¬Ù…Ø¹ Ù…ÛŒâ€ŒÚ©Ù†Ù‡. Ø§Ù„Ø¨ØªÙ‡ Ø§ÛŒÙ† ØªÙ…Ø§Ù… Ù…Ø§Ø¬Ø±Ø§ Ù†ÛŒØ³ØªØŒØ§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù‚ÙˆÛŒØªØ±ÛŒÙ† Ù…Ø¯Ù„ Ù‡Ø§ÛŒ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø¨Ø§Ø¹Ø« Ø´Ø¯Ù‡ Ú©Ù‡ Ø§ÛŒÙ† Ø§Ø¨Ø²Ø§Ø± Ø¨ØªÙˆÙ†Ù‡ Ø¯Ø± ØªÙ…Ø§Ù…ÛŒ Ø¨Ø§Ø²Ø§Ø± Ù‡Ø§ Ø§Ø² Ø¬Ù…Ù„Ù‡ ÙØ§Ø±Ú©Ø³-Ø·Ù„Ø§-Ø³Ù‡Ø§Ù… Ø§Ù…Ø±ÛŒÚ©Ø§ Ùˆ Ø§ÛŒØ±Ø§Ù† ØªØ­Ù„ÛŒÙ„ Ù‡Ø§ÛŒ Ø¨ÛŒ Ù†Ø¸Ø±ÛŒ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ø§Ø±Ø§Ø¦Ù‡ Ø¨Ø¯Ù‡.

Û²- Ø¢ÛŒØ§ Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø§Ù…Ú©Ø§Ù† Ø®Ø±ÛŒØ¯ ÛŒØ§ ÙØ±ÙˆØ´ Ù…Ø³ØªÙ‚ÛŒÙ… Ø±Ù…Ø²Ø§Ø±Ø² Ø¯Ø§Ø±Ù‡ØŸ
Ø®ÛŒØ±. Ù†Ø§Ø±Ù…ÙˆÙˆÙ† ØµØ±ÙØ§Ù‹ ÛŒÚ© Ø§Ø¨Ø²Ø§Ø± ØªØ­Ù„ÛŒÙ„ Ùˆ Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒØ¯Ù‡ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯Ù‡. Ø®Ø±ÛŒØ¯ ÛŒØ§ ÙØ±ÙˆØ´ Ø±Ù…Ø²Ø§Ø±Ø² Ø¨Ø§ÛŒØ¯ Ø§Ø² Ø·Ø±ÛŒÙ‚ ØµØ±Ø§ÙÛŒâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¨Ø§Ù‡Ø§Ø´ÙˆÙ† Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø´Ù‡.

Û³- Ú†Ø·ÙˆØ± Ù…Ø·Ù…Ø¦Ù† Ø¨Ø§Ø´Ù… Ú©Ù‡ ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ Ø§Ø³Ú©Ù… ÛŒØ§ Ø±Ø§Ú¯ Ù†ÛŒØ³ØªÙ†ØŸ
Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø¨Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ø³Ù† Ù¾Ø±ÙˆÚ˜Ù‡ØŒ ØªØ¹Ø¯Ø§Ø¯ Ù‡ÙˆÙ„Ø¯Ø±Ù‡Ø§ØŒ Ø­Ø¬Ù… Ù…Ø¹Ø§Ù…Ù„Ø§ØªØŒ Ù†Ù‚Ø¯ÛŒÙ†Ú¯ÛŒØŒ Ø§Ø³Ù…Ø§Ø±Øª Ú©Ø§Ù†ØªØ±Ú©Øª Ùˆ ØªØ­Ù„ÛŒÙ„ Ú†Ø§Ø±Øª Ø±Ø§Ú¯â€ŒÙ¾ÙˆÙ„ Ø§Ø­ØªÙ…Ø§Ù„ Ø§Ø³Ú©Ù… Ø¨ÙˆØ¯Ù† ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ Ø±Ùˆ Ú©Ø§Ù‡Ø´ Ù…ÛŒâ€ŒØ¯Ù‡ Ùˆ Ø­ØªÛŒ Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ Ù†Ø´ÙˆÙ† Ù…ÛŒâ€ŒØ¯Ù‡.

Û´- Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ù…ÛŒâ€ŒØ¯Ù‡ Ù‚Ø§Ø¨Ù„ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ù‡Ø³ØªÙ†ØŸ
Ø§Ø¨Ø²Ø§Ø± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø¨Ø§ Ø¨ÛŒØ´ Ø§Ø² ÛµÛ° Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€Œ ØªØ­Ù„ÛŒÙ„ÛŒ Ø¨Ù‡ØªØ±ÛŒÙ† Ù¾ÛŒØ´ Ø¨ÛŒÙ†ÛŒ Ø±Ùˆ Ø§Ø² Ø¨Ø§Ø²Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒÚ©Ù†Ù‡Ø› Ø§Ù…Ø§ ØªØµÙ…ÛŒÙ… Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø¹Ø§Ù…Ù„Ù‡ Ø¨Ø§ Ú©Ø§Ø±Ø¨Ø±Ù‡ Ùˆ Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ù‡ÛŒÚ†â€ŒÚ¯ÙˆÙ†Ù‡ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª Ù…Ø§Ù„ÛŒ Ù†Ø¯Ø§Ø±Ù‡.

Ûµ- Ø¢ÛŒØ§ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¨Ø§ÛŒØ¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­Ø³Ø§Ø¨ ØµØ±Ø§ÙÛŒ Ùˆ ÛŒØ§ Ø¨Ø±ÙˆÚ©Ø± Ø±Ùˆ ÙˆØ§Ø±Ø¯ Ú©Ù†Ù…ØŸ
Ù†Ù‡! Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ù‡ÛŒÚ† Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ Ù…Ø«Ù„ APIØŒ ÛŒÙˆØ²Ø±Ù†ÛŒÙ… ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± ØµØ±Ø§ÙÛŒ ÛŒØ§ Ø¨Ø±ÙˆÚ©Ø± Ø§Ø²Øª Ù†Ù…ÛŒâ€ŒØ®ÙˆØ§Ø¯. Ø§Ø·Ù„Ø§Ø¹Ø§ØªØª Ù‡Ù…ÛŒØ´Ù‡ Ù…Ø­Ø±Ù…Ø§Ù†Ù‡ Ùˆ Ø§Ù…Ù† Ø¨Ø§Ù‚ÛŒ Ù…ÛŒâ€ŒÙ…ÙˆÙ†Ù‡.

Û¶- ØªÙØ§ÙˆØª Ø¨ÛŒÙ† Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø¯Ú©Ø³ Ùˆ Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ú©ÙˆÛŒÙ† Ùˆ Ù†Ø§Ø±Ù…ÙˆÙˆÙ† ØªÛŒ Ø§Ù† ØªÛŒ Ú†ÛŒÙ‡ØŸ
Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø¯Ú©Ø³: Ù…Ø®ØµÙˆØµ ØªØ­Ù„ÛŒÙ„ ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ Ø¯Ú©Ø³ (Ù…Ø«Ù„ Ø³ÙˆÙ„Ø§Ù†Ø§ØŒ Ù…ÛŒÙ…â€ŒÚ©ÙˆÛŒÙ†â€ŒÙ‡Ø§)
Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ú©ÙˆÛŒÙ†: Ù…Ø®ØµÙˆØµ ØªØ­Ù„ÛŒÙ„ Ú©ÙˆÛŒÙ†â€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ Ø¯Ø± ØµØ±Ø§ÙÛŒâ€ŒÙ‡Ø§ÛŒ Ù…ØªÙ…Ø±Ú©Ø² (BTC, ETH, SOL Ùˆ Ø¢Ù„ØªÚ©ÙˆÛŒÙ†â€ŒÙ‡Ø§)
Ù†Ø§Ø±Ù…ÙˆÙˆÙ† ØªÛŒ Ø§Ù† ØªÛŒ:Ø¨Ø± Ù¾Ø§ÛŒÙ‡ Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ† Ùˆ Ù‚ÙˆÛŒØªØ±ÛŒÙ† Ù…Ø¯Ù„ Ù‡Ø§ÛŒ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø¬Ù‡Øª ØªØ­Ù„ÛŒÙ„ ØªØµÙˆÛŒØ± Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ Ùˆ Ø§Ø±Ø§Ø¦Ù‡ Ø³ØªØ§Ù¾ Ù‡Ø§ÛŒ Ù…Ø¹Ø§Ù…Ù„Ø§ØªÛŒ Ø¯Ù‚ÛŒÙ‚ Ù‡Ø³ØªØ´.

Û·- Ø¢ÛŒØ§ Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÛŒâ€ŒØ´Ù‡ØŸ
Ø¨Ù„Ù‡. Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø¨Ù‡â€ŒØµÙˆØ±Øª Ù¾ÛŒÙˆØ³ØªÙ‡ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÛŒâ€ŒØ´Ù‡. Ø§Ú¯Ù‡ Ù‚Ø·Ø¹ÛŒ ÛŒØ§ ØªØºÛŒÛŒØ±Ø§Øª Ù…Ù‡Ù… Ø¨Ø§Ø´Ù‡ØŒ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ú©Ø§Ù†Ø§Ù„ Ø±Ø³Ù…ÛŒ Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….

Û¸- Ø¢ÛŒØ§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ù¾ÛŒÚ†ÛŒØ¯Ù‡â€ŒØ³ØªØŸ
Ø§ØµÙ„Ø§Ù‹! Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø³Ø§Ø¯Ù‡ØŒ ØªÙ…ÛŒØ² Ùˆ Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡â€ŒØ³Øª â€” Ø­ØªÛŒ Ø§Ú¯Ù‡ ØªØ§Ø²Ù‡ ÙˆØ§Ø±Ø¯ Ù…Ø§Ø±Ú©Øª Ø¨Ø§Ø´ÛŒ.

Û¹-Ø¢ÛŒØ§ Ø§Ù…Ú©Ø§Ù† Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¢Ù†Ú†ÛŒÙ† BTC Ùˆ ETH Ù‡Ø³ØªØŸ
Ø¨Ù„Ù‡. Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ú©ÙˆÛŒÙ† Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø¢Ù†Ú†ÛŒÙ† Ø¨ÛŒØªÚ©ÙˆÛŒÙ† Ùˆ Ø§ØªØ±ÛŒÙˆÙ…ØŒ Ù‡Ù…Ú†Ù†ÛŒÙ† Ø±ÙØªØ§Ø± Ù†Ù‡Ù†Ú¯â€ŒÙ‡Ø§ØŒ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ Ø¨Ù‡ ØµØ±Ø§ÙÛŒâ€ŒÙ‡Ø§ Ùˆ Ø°Ø®Ø§ÛŒØ± Ø´Ø±Ú©Øªâ€ŒÙ‡Ø§ Ø±Ùˆ ØªØ­Ù„ÛŒÙ„ Ú©Ù†Ù‡.

Û±Û°- Ø¢ÛŒØ§ Ø§Ø³ØªÙØ§Ø¯Ù‡ ØºÛŒØ±Ù…Ø¬Ø§Ø² Ø§Ø² Ù…Ø­ØªÙˆØ§ ÛŒØ§ Ú©Ù¾ÛŒâ€ŒØ¨Ø±Ø¯Ø§Ø±ÛŒ Ù…Ø¬Ø§Ø²Ù‡ØŸ
Ø®ÛŒØ±. Ù‡Ø±Ú¯ÙˆÙ†Ù‡ Ú©Ù¾ÛŒØŒ Ø§Ù†ØªØ´Ø§Ø±ØŒ ÙØ±ÙˆØ´ Ù…Ø¬Ø¯Ø¯ ÛŒØ§ ØªØºÛŒÛŒØ± Ù…Ø­ØªÙˆØ§ Ø¨Ø¯ÙˆÙ† Ù…Ø¬ÙˆØ² Ø±Ø³Ù…ÛŒ Ù¾ÛŒÚ¯Ø±Ø¯ Ù‚Ø§Ù†ÙˆÙ†ÛŒ Ø¯Ø§Ø±Ù‡ Ùˆ Ø®Ù„Ø§Ù Ø´Ø±Ø§ÛŒØ· Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…Ø­Ø³ÙˆØ¨ Ù…ÛŒâ€ŒØ´Ù‡.
"""

# Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ø³ØªÙ‚ÛŒÙ… Ù…Ø­ØµÙˆÙ„Ø§Øª Ù†Ø§Ø±Ù…ÙˆÙˆÙ†
NARMOON_DEX_LINK = "https://chatgpt.com/g/g-681e61f1baa88191bf50a82156694a79-narmoon-dex"
NARMOON_COIN_LINK = "https://chatgpt.com/g/g-681e68b8ccf08191b5e53b91b4f09c6e-narmoon-coin"

# Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ… Ùˆ Ø¨Ø§Ù„Ø§ØªØ±
TIMEFRAMES = ["Û± Ø¯Ù‚ÛŒÙ‚Ù‡", "Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡", "Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡", "Û± Ø³Ø§Ø¹ØªÙ‡", "Û´ Ø³Ø§Ø¹ØªÙ‡", "Ø±ÙˆØ²Ø§Ù†Ù‡", "Ù‡ÙØªÚ¯ÛŒ"]
HIGHER_TIMEFRAMES = {
    "Û± Ø¯Ù‚ÛŒÙ‚Ù‡": ["Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡", "Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡", "Û± Ø³Ø§Ø¹ØªÙ‡"],
    "Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡": ["Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡", "Û± Ø³Ø§Ø¹ØªÙ‡", "Û´ Ø³Ø§Ø¹ØªÙ‡"],
    "Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡": ["Û± Ø³Ø§Ø¹ØªÙ‡", "Û´ Ø³Ø§Ø¹ØªÙ‡", "Ø±ÙˆØ²Ø§Ù†Ù‡"],
    "Û± Ø³Ø§Ø¹ØªÙ‡": ["Û´ Ø³Ø§Ø¹ØªÙ‡", "Ø±ÙˆØ²Ø§Ù†Ù‡", "Ù‡ÙØªÚ¯ÛŒ"],
    "Û´ Ø³Ø§Ø¹ØªÙ‡": ["Ø±ÙˆØ²Ø§Ù†Ù‡", "Ù‡ÙØªÚ¯ÛŒ", "Ù…Ø§Ù‡Ø§Ù†Ù‡"],
    "Ø±ÙˆØ²Ø§Ù†Ù‡": ["Ù‡ÙØªÚ¯ÛŒ", "Ù…Ø§Ù‡Ø§Ù†Ù‡", "Ø³Ø§Ù„Ø§Ù†Ù‡"],
    "Ù‡ÙØªÚ¯ÛŒ": ["Ù…Ø§Ù‡Ø§Ù†Ù‡", "Ø³Ø§Ù„Ø§Ù†Ù‡", "Ø¯Ù‡â€ŒØ³Ø§Ù„Ù‡"],
}

# ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§ÛŒ ConversationHandler
MAIN_MENU, SELECTING_TIMEFRAME, WAITING_IMAGES = range(3)

# Ø¯Ø³ØªÙˆØ±Ø§Ù„Ø¹Ù…Ù„ ØªØ­Ù„ÛŒÙ„
VISION_PROMPT = """
ØªØµÙˆÛŒØ± Ù†Ù…ÙˆØ¯Ø§Ø± Ø±Ø§ ÙÙ‚Ø· Ø¨Ø§ Ø¯Ø§Ø¯Ù‡ ØªØµÙˆÛŒØ±ÛŒ Ùˆ Ø·Ø¨Ù‚ Ø³Ø§Ø®ØªØ§Ø± Ø²ÛŒØ±ØŒ Ø¨Ù‡ ØµÙˆØ±Øª Ø¨ÙˆÙ„Øªâ€ŒÙ¾ÙˆÛŒÙ†Øª Ùˆ Ø¨Ø¯ÙˆÙ† Ø¬Ø¯ÙˆÙ„ ØªØ­Ù„ÛŒÙ„ Ú©Ù†:

Û±. Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø§ÙˆÙ„ÛŒÙ‡:
- ØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ… (W1/D1/4H) Ùˆ Ø¬ÙØª Ø§Ø±Ø² Ø±Ø§ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ú©Ù†
- Ø±ÙˆÙ†Ø¯ Ù‡Ø± ØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ…: ØµØ¹ÙˆØ¯ÛŒ/Ù†Ø²ÙˆÙ„ÛŒ/Ø±Ù†Ø¬
- Ù‚ÛŒÙ…Øª ÙØ¹Ù„ÛŒ Ùˆ Ù†ÙˆØ¹ Ø¢Ø®Ø±ÛŒÙ† Ú©Ù†Ø¯Ù„ (Ù…Ø«Ù„Ø§Ù‹ Ù…Ø§Ø±Ø§Ø¨ÙˆØ²ÙˆØŒ Ø¯ÙˆØ¬ÛŒØŒ Ù¾ÛŒÙ†â€ŒØ¨Ø§Ø±)

Û². ØªØ­Ù„ÛŒÙ„ Ø³Ø·ÙˆØ­ Ùˆ Ø§Ù„Ú¯ÙˆÙ‡Ø§:
- Ø³Ù‡ Ø­Ù…Ø§ÛŒØª Ùˆ Ø³Ù‡ Ù…Ù‚Ø§ÙˆÙ…Øª Ú©Ù„ÛŒØ¯ÛŒ Ø¨Ø§ Ù‚ÛŒÙ…Øª Ø¯Ù‚ÛŒÙ‚ (Ù…Ø«Ù„Ø§Ù‹ "Û±.Û²Û°Û°Û°")
- Ù‚Ø¯Ø±Øª Ù‡Ø± Ø³Ø·Ø­: Ø¶Ø¹ÛŒÙ/Ù…ØªÙˆØ³Ø·/Ù‚ÙˆÛŒ (Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¨Ø±Ø®ÙˆØ±Ø¯ Ùˆ Ø­Ø¬Ù…)
- Ø³Ø·ÙˆØ­ ÙÛŒØ¨ÙˆÙ†Ø§Ú†ÛŒ Ø§ØµÙ„ÛŒ Ø¨Ø§ Ù‚ÛŒÙ…Øª Ø¯Ù‚ÛŒÙ‚ (Û³Û¸.Û²ÙªØŒ ÛµÛ°ÙªØŒ Û¶Û±.Û¸ÙªØŒ Û±Û¶Û±.Û¸Ùª)
- Ù…Ù‡Ù…â€ŒØªØ±ÛŒÙ† Ø§Ù„Ú¯Ùˆ ÛŒØ§ Ú©Ù†Ø¯Ù„ ÙˆÛŒÚ˜Ù‡ (Ù…Ø«Ù„ Ø§Ù†Ú¯Ø§Ù„ÙÛŒÙ†Ú¯ ÛŒØ§ Ù¾ÛŒÙ†â€ŒØ¨Ø§Ø± Ø±ÙˆÛŒ Ø³Ø·Ø­)
- Ø­Ø¬Ù… Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ùˆ ÙˆØ§Ú¯Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§ Ø¯Ø± Ù†Ù‚Ø§Ø· Ú©Ù„ÛŒØ¯ÛŒ

Û³. ØªØ­Ù„ÛŒÙ„ Ú†Ù†Ø¯ØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ…ÛŒ:
- Ø±ÙˆÙ†Ø¯ ØºØ§Ù„Ø¨ Ùˆ Ù…Ø­Ø¯ÙˆØ¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù‡Ù…Ù¾ÙˆØ´Ø§Ù† (Confluence)
- Ø³Ø·Ø­ Ú©Ù„ÛŒØ¯ÛŒ Ù…Ø´ØªØ±Ú© Ø¨ÛŒÙ† ØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ…â€ŒÙ‡Ø§ (Ø¯Ø± ØµÙˆØ±Øª ÙˆØ¬ÙˆØ¯)
- ØªØ£ÛŒÛŒØ¯ ÛŒØ§ ØªÙ†Ø§Ù‚Ø¶ Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§ Ø¨ÛŒÙ† ØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ…â€ŒÙ‡Ø§

Û´. Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ Ø§Ø­ØªÙ…Ø§Ù„ÛŒ:
- ØµØ¹ÙˆØ¯ÛŒ: Ø´Ø±Ø· Ø´Ú©Ø³Øª Ù…Ù‚Ø§ÙˆÙ…Øª [Ø¹Ø¯Ø¯ Ø¯Ù‚ÛŒÙ‚]ØŒ Ø§Ù‡Ø¯Ø§Ù [Ø¹Ø¯Ø¯ ÙÛŒØ¨ÙˆÙ†Ø§Ú†ÛŒ Ùˆ Ù…Ù‚Ø§ÙˆÙ…Øª Ø¨Ø¹Ø¯ÛŒ]ØŒ Ø§Ø­ØªÙ…Ø§Ù„ (Ø¯Ø± ØµÙˆØ±Øª Ø§Ù…Ú©Ø§Ù†)
- Ù†Ø²ÙˆÙ„ÛŒ: Ø´Ø±Ø· Ø´Ú©Ø³Øª Ø­Ù…Ø§ÛŒØª [Ø¹Ø¯Ø¯ Ø¯Ù‚ÛŒÙ‚]ØŒ Ø§Ù‡Ø¯Ø§Ù [Ø¹Ø¯Ø¯ ÙÛŒØ¨ÙˆÙ†Ø§Ú†ÛŒ Ùˆ Ø­Ù…Ø§ÛŒØª Ø¨Ø¹Ø¯ÛŒ]ØŒ Ø§Ø­ØªÙ…Ø§Ù„
- Ø±Ù†Ø¬: Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø­Ø±Ú©Øª [X ØªØ§ Y] Ùˆ Ù†Ù‚Ø§Ø· Ø­Ø³Ø§Ø³ Ø´Ú©Ø³Øª

Ûµ. Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø¹Ù…Ù„ÛŒ (Ø¯Ø± ØµÙˆØ±Øª ÙˆØ¬ÙˆØ¯ Ù‡Ù…Ù‡ Ø´Ø±Ø§ÛŒØ· Ø²ÛŒØ±):
- ÙˆØ±ÙˆØ¯ (Entry): [Ø¹Ø¯Ø¯ Ø¯Ù‚ÛŒÙ‚]
- Ø§Ø³ØªØ§Ù¾ Ø¯Ø§ÛŒÙ†Ø§Ù…ÛŒÚ©:  
    â€¢ Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ù‡Ø´Ø¯Ø§Ø± (Stop Warning): [Ù…Ø«Ù„Ø§Ù‹ Û²-Û³Ùª Ø²ÛŒØ± Ø³Ø·Ø­ Ú©Ù„ÛŒØ¯ÛŒ]
    â€¢ Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø®Ø±ÙˆØ¬ Ú©Ø§Ù…Ù„ (Hard Stop): [Ù…Ø«Ù„Ø§Ù‹ Ø²ÛŒØ± Ø­Ù…Ø§ÛŒØª Ø§ØµÙ„ÛŒ/Ø³ÙˆÛŒÙ†Ú¯ Ù„Ùˆ ÛŒØ§ Ø¨Ø§Ù„Ø§ÛŒ Ù…Ù‚Ø§ÙˆÙ…Øª]
- ØªØ§Ø±Ú¯Øª Û±: [Ø¹Ø¯Ø¯ Ø¯Ù‚ÛŒÙ‚ ÛŒØ§ Ø³Ø·Ø­ Ù…Ù‚Ø§ÙˆÙ…Øª]
- ØªØ§Ø±Ú¯Øª Û²: [Ø¹Ø¯Ø¯ Ø¯Ù‚ÛŒÙ‚ ÛŒØ§ ÙÛŒØ¨Ùˆ (Ù…Ø«Ù„Ø§Ù‹ "Û±.ÛµÛ±Û¸ (ÙÛŒØ¨Ùˆ Û±Û¶Û±.Û¸Ùª)")]
- R/R: Ø­Ø¯Ø§Ù‚Ù„ Û±:Û² (Ø¨Ø± Ø§Ø³Ø§Ø³ Hard Stop)
- Ù…Ù†Ø·Ù‚ Ú©ÙˆØªØ§Ù‡ Ø³ÛŒÚ¯Ù†Ø§Ù„ (Ù…Ø«Ù„Ø§Ù‹ "Ø¨Ø±Ú¯Ø´Øª Ø§Ø² Ø­Ù…Ø§ÛŒØª Ù‚ÙˆÛŒ + ØªØ§ÛŒÛŒØ¯ Ø­Ø¬Ù…")

Û¶. Ù…Ø¯ÛŒØ±ÛŒØª Ø±ÛŒØ³Ú© Ùˆ Ù‡Ø´Ø¯Ø§Ø±:
- Ø­Ø¯Ø§Ú©Ø«Ø± Ø±ÛŒØ³Ú© Ù‡Ø± Ù…Ø¹Ø§Ù…Ù„Ù‡: Û±-Û²Ùª
- Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ù‡Ø´Ø¯Ø§Ø± Ùˆ Ø®Ø±ÙˆØ¬ Ú©Ø§Ù…Ù„ Ø±Ø§ Ø¯Ø± Ù…Ø¯ÛŒØ±ÛŒØª Ø±ÛŒØ³Ú© ØªÚ©Ø±Ø§Ø± Ú©Ù† (Ú©Ø§Ù…Ù„Ø§Ù‹ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ø¨Ø§ Ø¨Ø®Ø´ Ø³ÛŒÚ¯Ù†Ø§Ù„)
- Ù‡Ø´Ø¯Ø§Ø± ÙˆÛŒÚ˜Ù‡: Ø§Ø­ØªÙ…Ø§Ù„ ÙÛŒÚ© Ø¨Ø±ÛŒÚ©â€ŒØ§ÙˆØªØŒ Ù†ÙˆØ³Ø§Ù†Ø§Øª Ø´Ø¯ÛŒØ¯ØŒ Ø®Ø¨Ø± Ù…Ù‡Ù…

Û·. Ø¬Ù…Ø¹â€ŒØ¨Ù†Ø¯ÛŒ Ùˆ ØªÙˆØµÛŒÙ‡ Ù†Ù‡Ø§ÛŒÛŒ:
- Ø®Ù„Ø§ØµÙ‡ Ø±ÙˆÙ†Ø¯ Ùˆ Ù†Ú©ØªÙ‡ Ú©Ù„ÛŒØ¯ÛŒ Ù…Ø¹Ø§Ù…Ù„Ù‡ (ØªØ§ Ûµ Ø¨ÙˆÙ„Øªâ€ŒÙ¾ÙˆÛŒÙ†Øª Ú©ÙˆØªØ§Ù‡)
- ØªÙˆØµÛŒÙ‡ Ù†Ù‡Ø§ÛŒÛŒ: Ø®Ø±ÛŒØ¯/ÙØ±ÙˆØ´/Ø§Ù†ØªØ¸Ø§Ø± (Ø¨Ø§ Ø´Ø±Ø· Ø¹Ø¯Ø¯ÛŒ Ø¯Ù‚ÛŒÙ‚)

**Ù…Ù‡Ù…:**
- ÙÙ‚Ø· Ø¨ÙˆÙ„Øªâ€ŒÙ¾ÙˆÛŒÙ†Øª (Ø¨Ø¯ÙˆÙ† Ø¬Ø¯ÙˆÙ„ ÛŒØ§ ØªÙˆØ¶ÛŒØ­ Ø§Ø¶Ø§ÙÙ‡)
- ØªØ­Ù„ÛŒÙ„ ÙÙ‚Ø· Ø¨Ø§ Ø¯Ø§Ø¯Ù‡ ØªØµÙˆÛŒØ± Ùˆ Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ø¯Ø¯ÛŒ Ø¯Ù‚ÛŒÙ‚
- Ø¹Ø¨Ø§Ø±Ø§Øª ØªØ±Ø¯ÛŒØ¯ÛŒ ("Ø´Ø§ÛŒØ¯"ØŒ "Ù…Ù…Ú©Ù† Ø§Ø³Øª") Ù…Ù…Ù†ÙˆØ¹
- Ø§Ú¯Ø± Ø´Ø±Ø§ÛŒØ· Ø³ÛŒÚ¯Ù†Ø§Ù„ Ú©Ø§Ù…Ù„ Ù†Ø¨ÙˆØ¯ ÙÙ‚Ø· ØªØ­Ù„ÛŒÙ„ Ùˆ Ø³Ù†Ø§Ø±ÛŒÙˆ Ø§Ø±Ø§Ø¦Ù‡ Ø¨Ø¯Ù‡
- ØªØ§Ø±Ú¯Øªâ€ŒÙ‡Ø§ÛŒ ÙÛŒØ¨ÙˆÙ†Ø§Ú†ÛŒ Ø­ØªÙ…Ø§Ù‹ Ø¨Ø§ Ù‚ÛŒÙ…Øª Ø¯Ù‚ÛŒÙ‚ Ø°Ú©Ø± Ø´ÙˆØ¯
- Ø§Ø³ØªØ§Ù¾ Ø¯Ø§ÛŒÙ†Ø§Ù…ÛŒÚ© Ù‡Ù…ÛŒØ´Ù‡ Ø´Ø§Ù…Ù„ Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ù‡Ø´Ø¯Ø§Ø± Ùˆ Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø®Ø±ÙˆØ¬ Ø¨Ø§Ø´Ø¯
- Ø®Ø±ÙˆØ¬ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒØŒ Ù…Ø®ØªØµØ± Ùˆ Ú©Ø§Ù…Ù„Ø§Ù‹ Ù‚Ø§Ø¨Ù„ Ø§Ø¬Ø±Ø§ Ø¨Ø§Ø´Ø¯
"""

# ØªÙˆØ§Ø¨Ø¹ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡
def init_db():
    """Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ Ùˆ Ø¬Ø¯Ø§ÙˆÙ„ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    
    # Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÙˆÙ„ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
    cursor.execute('''
    CREATE TABLE IF NOT EXISTS users (
        user_id INTEGER PRIMARY KEY,
        username TEXT,
        subscription_end DATE,
        subscription_type TEXT,
        is_active BOOLEAN DEFAULT 0
    )
    ''')
    
    # Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÙˆÙ„ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§
    cursor.execute('''
    CREATE TABLE IF NOT EXISTS transactions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        user_id INTEGER,
        txid TEXT,
        wallet_address TEXT,
        amount REAL,
        subscription_type TEXT,
        status TEXT DEFAULT 'pending',
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        FOREIGN KEY (user_id) REFERENCES users (user_id)
    )
    ''')
    
    conn.commit()
    conn.close()

def check_subscription(user_id):
    """Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø§Ø´ØªØ±Ø§Ú© Ú©Ø§Ø±Ø¨Ø±"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    
    cursor.execute("SELECT subscription_end, is_active FROM users WHERE user_id = ?", (user_id,))
    result = cursor.fetchone()
    
    if not result:
        conn.close()
        return False
    
    end_date_str, is_active = result
    if not is_active:
        conn.close()
        return False
    
    end_date = datetime.datetime.strptime(end_date_str, '%Y-%m-%d').date()
    today = datetime.date.today()
    
    conn.close()
    return end_date >= today

def register_user(user_id, username):
    """Ø«Ø¨Øª Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    
    cursor.execute("SELECT user_id FROM users WHERE user_id = ?", (user_id,))
    if not cursor.fetchone():
        cursor.execute(
            "INSERT INTO users (user_id, username) VALUES (?, ?)",
            (user_id, username)
        )
        conn.commit()
    
    conn.close()

def activate_subscription(user_id, duration_months, sub_type):
    """ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø§Ø´ØªØ±Ø§Ú© Ú©Ø§Ø±Ø¨Ø±"""
    conn = sqlite3.connect('bot_database.db')
    cursor = conn.cursor()
    
    today = datetime.date.today()
    end_date = today + datetime.timedelta(days=30 * duration_months)
    
    cursor.execute(
        "UPDATE users SET subscription_end = ?, subscription_type = ?, is_active = 1 WHERE user_id = ?",
        (end_date.strftime('%Y-%m-%d'), sub_type, user_id)
    )
    
    conn.commit()
    conn.close()
    return end_date.strftime('%Y-%m-%d')

# ØªÙˆØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ø±Ø¨Ø§Øª
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ø´Ø±ÙˆØ¹ Ø±Ø¨Ø§Øª Ùˆ Ù†Ù…Ø§ÛŒØ´ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ"""
    # Ø±ÛŒØ³Øª ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ø±Ø¨Ø±
    context.user_data.clear()
    
    # Ø«Ø¨Øª Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
    user_id = update.effective_user.id
    username = update.effective_user.username
    register_user(user_id, username)
    
    # Ø§ÛŒØ¬Ø§Ø¯ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ
    main_menu_buttons = [
        [InlineKeyboardButton("ğŸ“Š ØªØ­Ù„ÛŒÙ„ Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§", callback_data="analyze_charts")],
        [InlineKeyboardButton("ğŸ“š Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡", callback_data="guide")],
        [InlineKeyboardButton("ğŸ›’ Ù…Ø­ØµÙˆÙ„Ø§Øª Ù†Ø§Ø±Ù…ÙˆÙˆÙ†", callback_data="narmoon_products")],
        [InlineKeyboardButton("ğŸ’³ Ø®Ø±ÛŒØ¯ Ø§Ø´ØªØ±Ø§Ú©", callback_data="subscription")],
        [InlineKeyboardButton("ğŸ§  Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ", callback_data="ai_features")],
        [InlineKeyboardButton("â“ Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„", callback_data="faq")],
        [InlineKeyboardButton("ğŸ“œ Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª", callback_data="terms")],
        [InlineKeyboardButton("ğŸ‘¨â€ğŸ’» Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ", callback_data="support")]
    ]
    
    main_menu_markup = InlineKeyboardMarkup(main_menu_buttons)
    
    # Ù¾ÛŒØ§Ù… Ø®ÙˆØ´Ø§Ù…Ø¯Ú¯ÙˆÛŒÛŒ Ø¨Ø§ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ
    # Ø¯Ø±ÛŒØ§ÙØª Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø± Ø¨Ø±Ø§ÛŒ Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒ Ù¾ÛŒØ§Ù…
    user_name = update.effective_user.first_name if update.effective_user.first_name else "Ú©Ø§Ø±Ø¨Ø±"
    
    welcome_text = f"""
Ø³Ù„Ø§Ù… {user_name} Ø¹Ø²ÛŒØ²! ğŸ‘‹âœ¨ Ø¨Ù‡ Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ù…Ø¹Ø§Ù…Ù„Ù‡â€ŒÚ¯Ø±ÛŒ **Ù†Ø§Ø±Ù…ÙˆÙˆÙ†** Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ!

ğŸš€ Ø§ÛŒÙ†Ø¬Ø§ Ø¬Ø§ÛŒÛŒÙ‡ Ú©Ù‡ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø¨Ø§Ø²Ø§Ø± Ø±Ù…Ø²Ø§Ø±Ø²Ù‡Ø§ØŒ ÙØ§Ø±Ú©Ø³ØŒ Ø·Ù„Ø§ØŒ Ø³Ù‡Ø§Ù…(Ø§ÛŒØ±Ø§Ù† Ùˆ Ø¢Ù…Ø±ÛŒÚ©Ø§ Ùˆ ÛŒØ§ Ù‡Ø± Ú©Ø´ÙˆØ± Ø¯ÛŒÚ¯Ù‡) Ø±Ùˆ Ø¨Ø§ Ù‚Ø¯Ø±Øª Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ ØªØ­Ù„ÛŒÙ„ Ú©Ù†ÛŒØŒ Ø³ÛŒÚ¯Ù†Ø§Ù„ Ø¨Ú¯ÛŒØ±ÛŒ Ùˆ Ù‡Ù…ÛŒØ´Ù‡ ÛŒÚ© Ù‚Ø¯Ù… Ø¬Ù„ÙˆØªØ± Ø§Ø² Ø¨Ø§Ø²Ø§Ø± Ø¨Ø§Ø´ÛŒ.

ğŸ”¹ Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø§Ø² Ù…Ù†ÙˆÛŒ Ù¾Ø§ÛŒÛŒÙ† ÛŒÚ©ÛŒ Ø§Ø² Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒ!
"""
    
    # Ø§Ú¯Ø± callback_query Ø¯Ø§Ø±ÛŒÙ… (Ø¨Ø±Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ) Ø§Ø² Ø¢Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…ØŒ Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ† ØµÙˆØ±Øª Ù¾ÛŒØ§Ù… Ø¬Ø¯ÛŒØ¯ Ø¨ÙØ±Ø³ØªÛŒÙ…
    if update.callback_query:
        await update.callback_query.edit_message_text(
            welcome_text,
            reply_markup=main_menu_markup,
            parse_mode='Markdown'
        )
    else:
        await update.message.reply_text(
            welcome_text,
            reply_markup=main_menu_markup,
            parse_mode='Markdown'
        )
    
    return MAIN_MENU

async def handle_main_menu(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ´Ø±Ø¯Ù‡ Ø´Ø¯Ù‡ Ø¯Ø± Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ"""
    
    query = update.callback_query
    await query.answer()  # Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ú©Ù„ÛŒÚ© Ø¯Ú©Ù…Ù‡
    
    # Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø¯Ø§Ù… Ø¯Ú©Ù…Ù‡ ÙØ´Ø±Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª
    if query.data == "main_menu":
        return await start(update, context)
    elif query.data == "guide":
        return await usage_guide(update, context)
    elif query.data == "terms":
        return await terms_and_conditions(update, context)
    elif query.data == "subscription":
        return await subscription_plans(update, context)
    elif query.data == "support":
        return await support_contact(update, context)
    elif query.data == "narmoon_products":
        return await show_narmoon_products(update, context)
    elif query.data == "ai_features":
        return await show_ai_features(update, context)
    elif query.data == "faq":
        return await show_faq(update, context)
    elif query.data == "analyze_charts":
        # Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø§Ø´ØªØ±Ø§Ú© Ú©Ø§Ø±Ø¨Ø±
        user_id = update.effective_user.id
        if check_subscription(user_id):
            # Ø§Ú¯Ø± Ø§Ø´ØªØ±Ø§Ú© ÙØ¹Ø§Ù„ Ø¯Ø§Ø±Ø¯ØŒ Ø¨Ù‡ Ù…Ù†ÙˆÛŒ ØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ…â€ŒÙ‡Ø§ Ø¨Ø±ÙˆØ¯
            return await show_timeframes(update, context)
        else:
            # Ø§Ú¯Ø± Ø§Ø´ØªØ±Ø§Ú© Ù†Ø¯Ø§Ø±Ø¯ØŒ Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ Ùˆ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø®Ø±ÛŒØ¯ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯
            subscription_buttons = [
                [InlineKeyboardButton("ğŸ’³ Ø®Ø±ÛŒØ¯ Ø§Ø´ØªØ±Ø§Ú©", callback_data="subscription")],
                [InlineKeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ", callback_data="main_menu")]
            ]
            await query.edit_message_text(
                "âš ï¸ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¨Ø®Ø´ ØªØ­Ù„ÛŒÙ„ Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ø´ØªØ±Ø§Ú© ÙØ¹Ø§Ù„ Ø¯Ø§Ø±ÛŒØ¯.",
                reply_markup=InlineKeyboardMarkup(subscription_buttons)
            )
            return MAIN_MENU
    elif query.data == "free_trial":
        # Ø§Ø´ØªØ±Ø§Ú© Ø±Ø§ÛŒÚ¯Ø§Ù†
        context.user_data['selected_plan'] = "Ø±Ø§ÛŒÚ¯Ø§Ù†"
        context.user_data['plan_duration'] = 0.1  # Ø­Ø¯ÙˆØ¯ 3 Ø±ÙˆØ²
        
        # ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ù…Ø³ØªÙ‚ÛŒÙ… Ø§Ø´ØªØ±Ø§Ú© Ø±Ø§ÛŒÚ¯Ø§Ù†
        user_id = update.effective_user.id
        end_date = activate_subscription(user_id, 0.1, "Ø±Ø§ÛŒÚ¯Ø§Ù†")
        
        free_buttons = [
            [InlineKeyboardButton("ğŸ“Š Ø´Ø±ÙˆØ¹ ØªØ­Ù„ÛŒÙ„", callback_data="analyze_charts")],
            [InlineKeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ", callback_data="main_menu")]
        ]
        
        await query.edit_message_text(
            f"ğŸ‰ Ø§Ø´ØªØ±Ø§Ú© Ø±Ø§ÛŒÚ¯Ø§Ù† Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙØ¹Ø§Ù„ Ø´Ø¯!\n\nØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù†: {end_date}\n\nÙ…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ù‡Ù…ÛŒÙ† Ø­Ø§Ù„Ø§ Ø§Ø² Ø§Ù…Ú©Ø§Ù†Ø§Øª Ø±Ø¨Ø§Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.",
            reply_markup=InlineKeyboardMarkup(free_buttons)
        )
        return MAIN_MENU
    elif query.data == "sub_1month":
        # Ø§Ø´ØªØ±Ø§Ú© Ù…Ø§Ù‡Ø§Ù†Ù‡
        context.user_data['selected_plan'] = "Ù…Ø§Ù‡Ø§Ù†Ù‡"
        context.user_data['plan_amount'] = 14.99
        context.user_data['plan_duration'] = 1
        return await show_payment_info(update, context)
    elif query.data == "sub_3month":
        # Ø§Ø´ØªØ±Ø§Ú© Ø³Ù‡ Ù…Ø§Ù‡Ù‡
        context.user_data['selected_plan'] = "Ø³Ù‡ Ù…Ø§Ù‡Ù‡"
        context.user_data['plan_amount'] = 39.99
        context.user_data['plan_duration'] = 3
        return await show_payment_info(update, context)
    
    return MAIN_MENU

async def handle_timeframe_selection(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ù†ØªØ®Ø§Ø¨ ØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ…"""
    query = update.callback_query
    await query.answer()
    
    selected_tf = query.data.replace("tf_", "")
    context.user_data['selected_timeframe'] = selected_tf
    context.user_data['expected_frames'] = HIGHER_TIMEFRAMES[selected_tf]
    context.user_data['received_images'] = []
    tf_list = ", ".join(HIGHER_TIMEFRAMES[selected_tf])
    
    await query.edit_message_text(
        f"Ø¹Ø§Ù„ÛŒÙ‡! ğŸ‘ Ø­Ø§Ù„Ø§ Ù„Ø·ÙØ§Ù‹ **Û³ Ø§Ø³Ú©Ø±ÛŒÙ†â€ŒØ´Ø§Øª** Ø§Ø² Ú†Ø§Ø±Øª {tf_list} Ø±Ùˆ (Ø¯Ø± Ù‡Ø± ÙØ±Ù…ØªÛŒ) ÛŒÚ©ÛŒâ€ŒÛŒÚ©ÛŒ Ø§Ø±Ø³Ø§Ù„ Ú©Ù† ğŸ“¸\n\nØ¨Ø±Ø§ÛŒ Ù„ØºÙˆ ØªØ­Ù„ÛŒÙ„ØŒ Ø¯Ø³ØªÙˆØ± /cancel Ø±Ø§ Ø¨ÙØ±Ø³Øª.",
        parse_mode='Markdown'
    )
    
    return WAITING_IMAGES

# ØªÙˆØ§Ø¨Ø¹ Ù…Ù†ÙˆÙ‡Ø§ Ùˆ Ø¨Ø®Ø´â€ŒÙ‡Ø§
async def show_narmoon_products(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ù†Ù…Ø§ÛŒØ´ Ù…Ø­ØµÙˆÙ„Ø§Øª Ù†Ø§Ø±Ù…ÙˆÙˆÙ†"""
    products_buttons = [
        [InlineKeyboardButton("ğŸ”„ Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø¯Ú©Ø³ (Ø±Ø§ÛŒÚ¯Ø§Ù†)", url=NARMOON_DEX_LINK)],
        [InlineKeyboardButton("ğŸ’° Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ú©ÙˆÛŒÙ† (Ø±Ø§ÛŒÚ¯Ø§Ù†)", url=NARMOON_COIN_LINK)],
        [InlineKeyboardButton("ğŸ¤– Ù†Ø§Ø±Ù…ÙˆÙˆÙ† TNT (ÙˆÛŒÚ˜Ù‡ Pro)", callback_data="subscription")],
        [InlineKeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ", callback_data="main_menu")]
    ]
    
    products_markup = InlineKeyboardMarkup(products_buttons)
    
    await update.callback_query.edit_message_text(
        NARMOON_PRODUCTS,
        reply_markup=products_markup,
        parse_mode='Markdown'
    )
    
    return MAIN_MENU

async def show_ai_features(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ù†Ù…Ø§ÛŒØ´ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ"""
    features_buttons = [
        [InlineKeyboardButton("ğŸ’³ Ø®Ø±ÛŒØ¯ Ø§Ø´ØªØ±Ø§Ú©", callback_data="subscription")],
        [InlineKeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ", callback_data="main_menu")]
    ]
    
    features_markup = InlineKeyboardMarkup(features_buttons)
    
    await update.callback_query.edit_message_text(
        AI_ASSISTANT_FEATURES,
        reply_markup=features_markup,
        parse_mode='Markdown'
    )
    
    return MAIN_MENU

async def show_faq(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ù†Ù…Ø§ÛŒØ´ Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„"""
    faq_buttons = [
        [InlineKeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ", callback_data="main_menu")]
    ]
    
    faq_markup = InlineKeyboardMarkup(faq_buttons)
    
    await update.callback_query.edit_message_text(
        FAQ_CONTENT,
        reply_markup=faq_markup,
        parse_mode='Markdown'
    )
    
    return MAIN_MENU

async def usage_guide(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ù†Ù…Ø§ÛŒØ´ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø±Ø¨Ø§Øª"""
    guide_text = f"""
ğŸ“š Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø±Ø¨Ø§Øª ØªØ­Ù„ÛŒÙ„ Ú†Ø§Ø±Øª

Ø¨Ø±Ø§ÛŒ Ø¢Ø´Ù†Ø§ÛŒÛŒ Ú©Ø§Ù…Ù„ Ø¨Ø§ Ù†Ø­ÙˆÙ‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø±Ø¨Ø§ØªØŒ Ù„Ø·ÙØ§Ù‹ ÙˆÛŒØ¯ÛŒÙˆÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø²ÛŒØ± Ø±Ø§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯:

ğŸ¬ [Ù…Ø´Ø§Ù‡Ø¯Ù‡ ÙˆÛŒØ¯ÛŒÙˆÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ]({TUTORIAL_VIDEO_LINK})

Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø³Ø±ÛŒØ¹:
1ï¸âƒ£ Ø§Ø¨ØªØ¯Ø§ Ø§Ø´ØªØ±Ø§Ú© Ø®ÙˆØ¯ Ø±Ø§ Ø§Ø² Ø¨Ø®Ø´ Â«Ø®Ø±ÛŒØ¯ Ø§Ø´ØªØ±Ø§Ú©Â» ØªÙ‡ÛŒÙ‡ Ú©Ù†ÛŒØ¯
2ï¸âƒ£ Ø¨Ø¹Ø¯ Ø§Ø² Ù¾Ø±Ø¯Ø§Ø®ØªØŒ TXID Ø±Ø§ Ø¨Ù‡ Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯
3ï¸âƒ£ Ù¾Ø³ Ø§Ø² ØªØ£ÛŒÛŒØ¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ø¨Ø®Ø´ Â«ØªØ­Ù„ÛŒÙ„ Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§Â» Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
4ï¸âƒ£ ØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ… Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±Ø¯Ù‡ Ùˆ Ø³Ù‡ ØªØµÙˆÛŒØ± Ø§Ø² Ú†Ø§Ø±Øª Ø¯Ø± ØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ…â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯
5ï¸âƒ£ ØªØ­Ù„ÛŒÙ„ Ú©Ø§Ù…Ù„ Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯
"""
    
    guide_buttons = [[InlineKeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ", callback_data="main_menu")]]
    guide_markup = InlineKeyboardMarkup(guide_buttons)
    
    await update.callback_query.edit_message_text(
        guide_text, 
        reply_markup=guide_markup,
        parse_mode='Markdown',
        disable_web_page_preview=False  # Ø§Ø¬Ø§Ø²Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ ÙˆÛŒØ¯ÛŒÙˆ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯
    )
    
    return MAIN_MENU

async def terms_and_conditions(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ù†Ù…Ø§ÛŒØ´ Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª"""
    
    terms_buttons = [[InlineKeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ", callback_data="main_menu")]]
    terms_markup = InlineKeyboardMarkup(terms_buttons)
    
    await update.callback_query.edit_message_text(
        TERMS_AND_CONDITIONS, 
        reply_markup=terms_markup,
        parse_mode='Markdown'
    )
    
    return MAIN_MENU

async def subscription_plans(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ù†Ù…Ø§ÛŒØ´ Ù¾Ù„Ù†â€ŒÙ‡Ø§ÛŒ Ø§Ø´ØªØ±Ø§Ú©ÛŒ"""
    subscription_text = """
ğŸ’³ Ù¾Ù„Ù†â€ŒÙ‡Ø§ÛŒ Ø§Ø´ØªØ±Ø§Ú©ÛŒ Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ù†Ø§Ø±Ù…ÙˆÙˆÙ†

Ù„Ø·ÙØ§Ù‹ ÛŒÚ©ÛŒ Ø§Ø² Ù¾Ù„Ù†â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:

ğŸ”„ **Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø¯Ú©Ø³ (Ø±Ø§ÛŒÚ¯Ø§Ù†)**: Ø§ÙØ²ÙˆÙ†Ù‡ Ú†Øªâ€ŒØ¬ÛŒâ€ŒÙ¾ÛŒâ€ŒØªÛŒ Ù…Ø®ØµÙˆØµ ØªØ­Ù„ÛŒÙ„ ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ Ø¯Ú©Ø³

ğŸ’° **Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ú©ÙˆÛŒÙ† (Ø±Ø§ÛŒÚ¯Ø§Ù†)**: Ø§ÙØ²ÙˆÙ†Ù‡ Ú†Øªâ€ŒØ¬ÛŒâ€ŒÙ¾ÛŒâ€ŒØªÛŒ Ù…Ø®ØµÙˆØµ ØªØ­Ù„ÛŒÙ„ Ø¢Ù„ØªÚ©ÙˆÛŒÙ†â€ŒÙ‡Ø§

ğŸ¤– **Ù†Ø§Ø±Ù…ÙˆÙˆÙ† TNT (ÙˆÛŒÚ˜Ù‡ Pro)**:
ğŸ”¹ **Ù…Ø§Ù‡Ø§Ù†Ù‡:** Û±Û´ØŒÛ¹Û¹ Ø¯Ù„Ø§Ø± Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ù…Ø§Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ú©Ø§Ù…Ù„ Ø¨Ù‡ ØªÙ…Ø§Ù… Ø§Ù…Ú©Ø§Ù†Ø§Øª Ø±Ø¨Ø§Øª
ğŸ”¹ **Ø³Ù‡ Ù…Ø§Ù‡Ù‡ (Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ÙˆÛŒÚ˜Ù‡):** Û³Û¹ØŒÛ¹Û¹ Ø¯Ù„Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø³Ù‡ Ù…Ø§Ù‡ â€” Ù…Ø¹Ø§Ø¯Ù„ Ù…Ø§Ù‡ÛŒ ÙÙ‚Ø· Û±Û³ØŒÛ³Û³ Ø¯Ù„Ø§Ø±! ğŸ’¡
"""
    
    subscription_buttons = [
        [InlineKeyboardButton("ğŸ”„ Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ø¯Ú©Ø³ (Ø±Ø§ÛŒÚ¯Ø§Ù†)", url=NARMOON_DEX_LINK)],
        [InlineKeyboardButton("ğŸ’° Ù†Ø§Ø±Ù…ÙˆÙˆÙ† Ú©ÙˆÛŒÙ† (Ø±Ø§ÛŒÚ¯Ø§Ù†)", url=NARMOON_COIN_LINK)],
        [InlineKeyboardButton("ğŸ¤– Ù†Ø§Ø±Ù…ÙˆÙˆÙ† TNT Ù…Ø§Ù‡Ø§Ù†Ù‡ (Û±Û´ØŒÛ¹Û¹ Ø¯Ù„Ø§Ø±)", callback_data="sub_1month")],
        [InlineKeyboardButton("ğŸ¤– Ù†Ø§Ø±Ù…ÙˆÙˆÙ† TNT Ø³Ù‡ Ù…Ø§Ù‡Ù‡ (Û³Û¹ØŒÛ¹Û¹ Ø¯Ù„Ø§Ø±)", callback_data="sub_3month")],
        [InlineKeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ", callback_data="main_menu")]
    ]
    
    subscription_markup = InlineKeyboardMarkup(subscription_buttons)
    
    # Ø§Ú¯Ø± callback_query Ø¯Ø§Ø±ÛŒÙ… Ø§Ø² Ø¢Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…ØŒ Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ† ØµÙˆØ±Øª Ù…Ø³ØªÙ‚ÛŒÙ… Ù¾ÛŒØ§Ù… Ø¨ÙØ±Ø³ØªÛŒÙ…
    if update.callback_query:
        await update.callback_query.edit_message_text(
            subscription_text, 
            reply_markup=subscription_markup,
            parse_mode='Markdown'
        )
    else:
        await update.message.reply_text(
            subscription_text,
            reply_markup=subscription_markup,
            parse_mode='Markdown'
        )
    
    return MAIN_MENU

async def show_payment_info(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø¯Ø§Ø®Øª Ùˆ Ú©ÛŒÙ Ù¾ÙˆÙ„"""
    try:
        # Ø§Ù†ØªØ®Ø§Ø¨ ØªØµØ§Ø¯ÙÛŒ ÛŒÚ© Ø¢Ø¯Ø±Ø³ Ú©ÛŒÙ Ù¾ÙˆÙ„
        wallet_address = random.choice(SOLANA_WALLETS)
        
        # Ø°Ø®ÛŒØ±Ù‡ Ø¢Ø¯Ø±Ø³ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ø¯Ø± Ø¯ÛŒØªØ§ÛŒ Ú©Ø§Ø±Ø¨Ø±
        context.user_data['selected_wallet'] = wallet_address
        
        plan = context.user_data['selected_plan']
        amount = context.user_data['plan_amount']
        
        payment_text = f"""
ğŸ’ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø¯Ø§Ø®Øª Ø§Ø´ØªØ±Ø§Ú© {plan}

Ù…Ø¨Ù„Øº: {amount} Ø¯Ù„Ø§Ø±
Ø¢Ø¯Ø±Ø³ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø³ÙˆÙ„Ø§Ù†Ø§:

<code>{wallet_address}</code>

Ù„Ø·ÙØ§ Ù¾Ø³ Ø§Ø² Ù¾Ø±Ø¯Ø§Ø®ØªØŒ Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù† ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯ Ùˆ Ø´Ù†Ø§Ø³Ù‡ ØªØ±Ø§Ú©Ù†Ø´ (TXID) Ø±Ø§ Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø§Ø´ØªØ±Ø§Ú© Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯.

@Sultan_immortal
"""
        
        payment_buttons = [[InlineKeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª", callback_data="subscription")]]
        payment_markup = InlineKeyboardMarkup(payment_buttons)
        
        await update.callback_query.edit_message_text(
            payment_text, 
            reply_markup=payment_markup,
            parse_mode='HTML'  # Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² HTML Ø¨Ø¬Ø§ÛŒ Markdown
        )
    except Exception as e:
        print(f"Error in show_payment_info: {str(e)}")
        try:
            # Ø±ÙˆØ´ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø¯Ø± ØµÙˆØ±Øª Ø¨Ø±ÙˆØ² Ø®Ø·Ø§
            await update.callback_query.message.reply_text(
                payment_text,
                reply_markup=payment_markup,
                parse_mode='HTML'
            )
        except Exception as e2:
            print(f"Second attempt also failed: {str(e2)}")
    
    return MAIN_MENU

async def support_contact(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³ Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†"""
    support_text = """
\U0001F468\u200D\U0001F4BB Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø±Ø¨Ø§Øª ØªØ­Ù„ÛŒÙ„ Ú†Ø§Ø±Øª

Ø¨Ø±Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ùˆ Ø§Ø±Ø³Ø§Ù„ TXID Ù¾Ø±Ø¯Ø§Ø®ØªØŒ Ù„Ø·ÙØ§Ù‹ Ø¨Ø§ Ø¢ÛŒØ¯ÛŒ Ø²ÛŒØ± Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù… ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯:

@Sultan_immortal

Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø±ÙˆÛŒ Ù„ÛŒÙ†Ú© Ø²ÛŒØ± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯:
https://t.me/Sultan_immortal

\U0001F4DD Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ TXID Ø¨Ù‡ Ù¾Ø´ØªÛŒØ¨Ø§Ù†:
1. Ù¾Ø³ Ø§Ø² Ù¾Ø±Ø¯Ø§Ø®ØªØŒ Ø´Ù†Ø§Ø³Ù‡ ØªØ±Ø§Ú©Ù†Ø´ (TXID) Ø±Ø§ Ú©Ù¾ÛŒ Ú©Ù†ÛŒØ¯
2. Ø¨Ù‡ Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ù¾ÛŒØ§Ù… Ø¨Ø¯Ù‡ÛŒØ¯ Ùˆ TXID Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯
3. Ø¢ÛŒØ¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ù‡Ù… Ø°Ú©Ø± Ú©Ù†ÛŒØ¯
4. Ù¾Ø³ Ø§Ø² ØªØ£ÛŒÛŒØ¯ ØªØ±Ø§Ú©Ù†Ø´ØŒ Ø§Ø´ØªØ±Ø§Ú© Ø´Ù…Ø§ ÙØ¹Ø§Ù„ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯
"""
    
    # Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ
    back_button = [[InlineKeyboardButton("\U0001F519 Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ", callback_data="main_menu")]]
    back_markup = InlineKeyboardMarkup(back_button)
    
    await update.callback_query.edit_message_text(
        support_text, 
        reply_markup=back_markup,
        parse_mode='Markdown',
        disable_web_page_preview=True
    )
    
    return MAIN_MENU

async def show_timeframes(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ù†Ù…Ø§ÛŒØ´ Ù„ÛŒØ³Øª ØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ…â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨"""
    timeframe_buttons = []
    for tf in TIMEFRAMES:
        timeframe_buttons.append([InlineKeyboardButton(tf, callback_data=f"tf_{tf}")])
    
    timeframe_buttons.append([InlineKeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ", callback_data="main_menu")])
    timeframe_markup = InlineKeyboardMarkup(timeframe_buttons)
    
    await update.callback_query.edit_message_text(
        "Ù„Ø·ÙØ§Ù‹ ØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ… Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:",
        reply_markup=timeframe_markup
    )
    
    return SELECTING_TIMEFRAME

async def receive_images(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ø¯Ø±ÛŒØ§ÙØª ØªØµØ§ÙˆÛŒØ± Ú†Ø§Ø±Øª Ø§Ø² Ú©Ø§Ø±Ø¨Ø±"""
    # Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø´ØªØ±Ø§Ú© Ú©Ø§Ø±Ø¨Ø±
    user_id = update.effective_user.id
    if not check_subscription(user_id):
        subscription_buttons = [
            [InlineKeyboardButton("ğŸ’³ Ø®Ø±ÛŒØ¯ Ø§Ø´ØªØ±Ø§Ú©", callback_data="subscription")],
            [InlineKeyboardButton("ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ", callback_data="main_menu")]
        ]
        await update.message.reply_text(
            "âš ï¸ Ø§Ø´ØªØ±Ø§Ú© Ø´Ù…Ø§ Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡ ÛŒØ§ ÙØ¹Ø§Ù„ Ù†ÛŒØ³Øª. Ù„Ø·ÙØ§Ù‹ Ø§Ø´ØªØ±Ø§Ú© Ø®ÙˆØ¯ Ø±Ø§ ØªÙ…Ø¯ÛŒØ¯ Ú©Ù†ÛŒØ¯.",
            reply_markup=InlineKeyboardMarkup(subscription_buttons)
        )
        return MAIN_MENU
    
    file = None
    ext = "jpeg"
    # Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ø¹Ú©Ø³ ÛŒØ§ Ø¯Ø§Ú©ÛŒÙˆÙ…Ù†Øª Ø¹Ú©Ø³
    if update.message.photo:
        file = await update.message.photo[-1].get_file()
    elif update.message.document and update.message.document.mime_type.startswith('image/'):
        file = await update.message.document.get_file()
        ext = update.message.document.mime_type.split('/')[-1]
    else:
        await update.message.reply_text("ÙÙ‚Ø· Ø¹Ú©Ø³ Ø§Ø±Ø³Ø§Ù„ Ú©Ù† Ø±ÙÛŒÙ‚! ğŸ˜…")
        return WAITING_IMAGES

    photo_bytes = await file.download_as_bytearray()
    context.user_data['received_images'].append((photo_bytes, ext))

    received = len(context.user_data['received_images'])
    expected = 3

    if received < expected:
        await update.message.reply_text(f"Ø¹Ø§Ù„ÛŒ! {expected-received} Ø¹Ú©Ø³ Ø¯ÛŒÚ¯Ù‡ Ø§Ø² ØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ…â€ŒÙ‡Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒ Ø±Ùˆ Ø¨ÙØ±Ø³Øª ğŸ¤©")
        return WAITING_IMAGES

    # ÙˆÙ‚ØªÛŒ Ù‡Ø± Ø³Ù‡ Ø¹Ú©Ø³ Ø±Ø³ÛŒØ¯...
    await update.message.reply_text("Ø¯Ø± Ø­Ø§Ù„ ØªØ­Ù„ÛŒÙ„ Ù‡Ø± Ø³Ù‡ Ú†Ø§Ø±Øª... â³ğŸ”¥")

    # Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ú©Ø³â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ openai vision
    images_content = []
    for img_bytes, ext in context.user_data['received_images']:
        # ØªØ¹ÛŒÛŒÙ† mime type
        if ext in ["jpeg", "jpg"]:
            mime = "jpeg"
        elif ext == "png":
            mime = "png"
        elif ext == "webp":
            mime = "webp"
        else:
            mime = "jpeg"
        b64img = base64.b64encode(img_bytes).decode('utf-8')
        images_content.append({"type": "image_url", "image_url": {"url": f"data:image/{mime};base64,{b64img}", "detail": "high"}})

    # Ù¾ÛŒØ§Ù…ÛŒ Ø¨Ø§ Ú†Ù†Ø¯ ØªØµÙˆÛŒØ±
    messages = [
        {
            "role": "user",
            "content": [
                {"type": "text", "text": VISION_PROMPT}
            ] + images_content
        }
    ]
    try:
        response = client.chat.completions.create(
            model="gpt-4o",
            messages=messages,
            max_tokens=1300,
            temperature=0.2
        )
        result = response.choices[0].message.content

        # Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ
        menu_button = InlineKeyboardMarkup([[InlineKeyboardButton("ğŸ  Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ", callback_data="main_menu")]])
        
        await update.message.reply_text(
            "âœ… Ù†ØªÛŒØ¬Ù‡ ØªØ­Ù„ÛŒÙ„ Ø³Ù‡â€ŒØªØ§ÛŒÙ…â€ŒÙØ±ÛŒÙ…:\n\n" + result,
            reply_markup=menu_button
        )
    except Exception as e:
        await update.message.reply_text(f"âŒ Ø®Ø·Ø§ Ø¯Ø± ØªØ­Ù„ÛŒÙ„! Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù† ÛŒØ§ /start Ø±Ùˆ Ø¨Ø²Ù†.\n{str(e)}")

    context.user_data.clear()
    return MAIN_MENU

async def cancel(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ù„ØºÙˆ Ø¹Ù…Ù„ÛŒØ§Øª Ø¬Ø§Ø±ÛŒ Ùˆ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ"""
    context.user_data.clear()
    
    # Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ
    menu_button = InlineKeyboardMarkup([[InlineKeyboardButton("ğŸ  Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ", callback_data="main_menu")]])
    
    await update.message.reply_text(
        "Ø¹Ù…Ù„ÛŒØ§Øª Ù„ØºÙˆ Ø´Ø¯. Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ Ø¨Ø§Ø²Ú¯Ø±Ø¯ÛŒØ¯.",
        reply_markup=menu_button
    )
    return MAIN_MENU

# Ø¯Ø³ØªÙˆØ±Ø§Øª Ù…Ø¯ÛŒØ±ÛŒØªÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ù…ÛŒÙ†
async def admin_activate(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø§Ø´ØªØ±Ø§Ú© Ú©Ø§Ø±Ø¨Ø± ØªÙˆØ³Ø· Ø§Ø¯Ù…ÛŒÙ† (ÙØ±Ù…Øª: /activate user_id duration plan_type)"""
    # Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø¯Ù…ÛŒÙ†
    if update.effective_user.id != ADMIN_ID:
        await update.message.reply_text("Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯.")
        return
    
    try:
        # Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§
        args = context.args
        if len(args) < 3:
            await update.message.reply_text("ÙØ±Ù…Øª ØµØ­ÛŒØ­: /activate user_id duration plan_type\nÙ…Ø«Ø§Ù„: /activate 123456789 3 Ø³Ù‡_Ù…Ø§Ù‡Ù‡")
            return
        
        user_id = int(args[0])
        duration = int(args[1])
        plan_type = args[2]
        
        # ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø§Ø´ØªØ±Ø§Ú©
        end_date = activate_subscription(user_id, duration, plan_type)
        
        # Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ù‡ Ø§Ø¯Ù…ÛŒÙ†
        await update.message.reply_text(f"Ø§Ø´ØªØ±Ø§Ú© Ú©Ø§Ø±Ø¨Ø± {user_id} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙØ¹Ø§Ù„ Ø´Ø¯.\nØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù†: {end_date}")
        
        # Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±
        try:
            await context.bot.send_message(
                chat_id=user_id,
                text=f"ğŸ‰ Ø§Ø´ØªØ±Ø§Ú© Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙØ¹Ø§Ù„ Ø´Ø¯!\n\nÙ†ÙˆØ¹ Ø§Ø´ØªØ±Ø§Ú©: {plan_type}\nØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù†: {end_date}\n\nØ§Ø² Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§ Ù…ØªØ´Ú©Ø±ÛŒÙ…! Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ ØªØ­Ù„ÛŒÙ„ Ú†Ø§Ø±ØªØŒ Ø¯Ø³ØªÙˆØ± /start Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯."
            )
        except Exception as e:
            await update.message.reply_text(f"Ø§Ø´ØªØ±Ø§Ú© ÙØ¹Ø§Ù„ Ø´Ø¯ Ø§Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ø®Ø·Ø§ Ù…ÙˆØ§Ø¬Ù‡ Ø´Ø¯: {str(e)}")
    
    except Exception as e:
        await update.message.reply_text(f"Ø®Ø·Ø§ Ø¯Ø± ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø§Ø´ØªØ±Ø§Ú©: {str(e)}")

async def admin_help(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¯Ø³ØªÙˆØ±Ø§Øª Ø§Ø¯Ù…ÛŒÙ†"""
    # Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø¯Ù…ÛŒÙ†
    if update.effective_user.id != ADMIN_ID:
        return
    
    help_text = """
\U0001F468\u200D\U0001F4BB Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¯Ø³ØªÙˆØ±Ø§Øª Ù…Ø¯ÛŒØ±ÛŒØªÛŒ:

/adminhelp - Ù†Ù…Ø§ÛŒØ´ Ø§ÛŒÙ† Ø±Ø§Ù‡Ù†Ù…Ø§
/activate user_id duration plan_type - ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø§Ø´ØªØ±Ø§Ú© Ú©Ø§Ø±Ø¨Ø±
Ù…Ø«Ø§Ù„: /activate 123456789 3 Ø³Ù‡_Ù…Ø§Ù‡Ù‡

/userinfo user_id - Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
Ù…Ø«Ø§Ù„: /userinfo 123456789
"""
    
    await update.message.reply_text(help_text)

async def admin_user_info(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ù…ÛŒÙ†"""
    # Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø¯Ù…ÛŒÙ†
    if update.effective_user.id != ADMIN_ID:
        return
    
    try:
        # Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§
        args = context.args
        if not args:
            await update.message.reply_text("ÙØ±Ù…Øª ØµØ­ÛŒØ­: /userinfo user_id\nÙ…Ø«Ø§Ù„: /userinfo 123456789")
            return
        
        user_id = int(args[0])
        
        # Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø§Ø² Ø¯ÛŒØªØ§Ø¨ÛŒØ³
        conn = sqlite3.connect('bot_database.db')
        cursor = conn.cursor()
        
        cursor.execute("SELECT * FROM users WHERE user_id = ?", (user_id,))
        user_data = cursor.fetchone()
        
        if not user_data:
            await update.message.reply_text(f"Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¨Ø§ Ø´Ù†Ø§Ø³Ù‡ {user_id} ÛŒØ§ÙØª Ù†Ø´Ø¯.")
            conn.close()
            return
        
        # Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
        user_info = f"""
ğŸ‘¤ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±:

Ø´Ù†Ø§Ø³Ù‡: {user_data[0]}
Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ: {user_data[1] or 'Ù†Ø§Ù…Ø´Ø®Øµ'}
ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù† Ø§Ø´ØªØ±Ø§Ú©: {user_data[2] or 'Ù†Ø¯Ø§Ø±Ø¯'}
Ù†ÙˆØ¹ Ø§Ø´ØªØ±Ø§Ú©: {user_data[3] or 'Ù†Ø¯Ø§Ø±Ø¯'}
ÙˆØ¶Ø¹ÛŒØª Ø§Ø´ØªØ±Ø§Ú©: {'ÙØ¹Ø§Ù„' if user_data[4] else 'ØºÛŒØ±ÙØ¹Ø§Ù„'}
"""
        
        # Ù†Ù…Ø§ÛŒØ´ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
        cursor.execute("SELECT * FROM transactions WHERE user_id = ? ORDER BY created_at DESC LIMIT 5", (user_id,))
        transactions = cursor.fetchall()
        
        if transactions:
            user_info += "\nğŸ’° ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±:\n"
            for tx in transactions:
                user_info += f"TXID: {tx[2]}\nÚ©ÛŒÙ Ù¾ÙˆÙ„: {tx[3]}\nÙ…Ø¨Ù„Øº: {tx[4]}\nÙˆØ¶Ø¹ÛŒØª: {tx[6]}\nØªØ§Ø±ÛŒØ®: {tx[7]}\n\n"
        
        conn.close()
        await update.message.reply_text(user_info)
        
    except Exception as e:
        await update.message.reply_text(f"Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±: {str(e)}")

def main():
    # Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡
    init_db()
    
    # Ø§ÛŒØ¬Ø§Ø¯ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù†
    app = ApplicationBuilder().token(TELEGRAM_TOKEN).build()
    
    # ØªØ¹Ø±ÛŒÙ conversation handler Ø§ØµÙ„ÛŒ
    conv_handler = ConversationHandler(
        entry_points=[CommandHandler("start", start)],
        states={
            MAIN_MENU: [CallbackQueryHandler(handle_main_menu)],
            SELECTING_TIMEFRAME: [CallbackQueryHandler(handle_timeframe_selection, pattern='^tf_')],
            WAITING_IMAGES: [MessageHandler(filters.PHOTO | filters.Document.IMAGE, receive_images)],
        },
        fallbacks=[CommandHandler("cancel", cancel)],
        allow_reentry=True
    )
    
    # Ø§ÙØ²ÙˆØ¯Ù† Ù‡Ù†Ø¯Ù„Ø±Ù‡Ø§
    app.add_handler(conv_handler)
    
    # Ø¯Ø³ØªÙˆØ±Ø§Øª Ù…Ø¯ÛŒØ±ÛŒØªÛŒ
    app.add_handler(CommandHandler("activate", admin_activate))
    app.add_handler(CommandHandler("adminhelp", admin_help))
    app.add_handler(CommandHandler("userinfo", admin_user_info))
    
    print("Ø±Ø¨Ø§Øª Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª! Ø§Ø¬Ø±Ø§ Ø´Ø¯.")
    app.run_polling()

if __name__ == "__main__":
    main()
